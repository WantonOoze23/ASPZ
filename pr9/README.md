# Практична робота №9  
**Тема:** Права доступу, власники, UID, GID, запуск програм і файлів у UNIX/Linux

---

**У UNIX/Linux-файлових системах, щоб запустити файл як програму або скрипт, необхідно, щоб були виставлені права на виконання (x). Однак існує виняток: якщо скрипт не має прав на виконання, але має права на читання, його можна передати як аргумент до інтерпретатора напряму.**

---

## Завдання 1

##Опис реалізації 

Програма  виводить список звичайних користувачів системи (UID > 1000), окрім поточного користувача.
Вона використовує команду getent passwd для отримання інформації про всі облікові записи, розбирає кожен рядок, виділяє ім'я користувача та UID, і виводить тих, хто відповідає умові.
Поточний користувач визначається через getlogin(), щоб його не показувати у списку.

Основні етапи:

+Викликає getent passwd через popen для читання списку користувачів.
+Для кожного рядка розбиває поля за допомогою strtok_r.
+Перевіряє, чи UID > 1000 і чи не співпадає ім'я з поточним користувачем.
+Виводить відповідних користувачів.
+Це дозволяє швидко побачити, які звичайні облікові записи існують у системі, окрім вашого.  


**Реалізація:**  
[`ex1.c`](ex1.c)

![Результат виконання завдання 1](images/ex1.png)

---

## Завдання 2

Опис реалізації
Програма демонструє спробу отримати доступ до захищеного системного файлу (/etc/master.passwd) від імені адміністратора, навіть якщо вона запущена звичайним користувачем.

Основні етапи:

+Використовує popen() для запуску команди sudo cat /etc/master.passwd і читання її виводу.
+Якщо команда не виконується, виводить повідомлення про помилку.
+Якщо доступ отримано, виводить вміст файлу построково.
+Після завершення закриває потік.

Помилка виникає через спробу виконання команди sudo від імені звичайного користувача без відповідних прав у файлі sudoers. Таким чином, команда не виконується, доступ до захищеного файлу не надається.

Запуск програми за допомогою sudo ./ex2 ситуацію не змінює. 


**Реалізація:**  
[`ex2.c`](ex2.c)

![Результат виконання завдання 2 root](images/ex2.png)

![Результат виконання завдання 2 user](images/ex2_user.png)

![Результат виконання завдання 2 user](images/ex2_sudo_user.png)
---

## Завдання 3

**Опис:**  
Напишіть програму, яка від імені root копіює файл, який вона перед цим створила від імені звичайного користувача. Потім вона повинна помістити копію у домашній каталог звичайного користувача.  
Далі, використовуючи звичайний обліковий запис, програма намагається змінити файл і зберегти зміни. Що відбудеться?  
Після цього програма намагається видалити цей файл за допомогою команди rm. Що відбудеться?

Файл /tmp/userfile.txt створюється звичайним користувачем без проблем. Далі, коли програма виконується з правами root, вона копіює цей файл у домашній каталог користувача. Оскільки копія створена від імені root, її власником є root, і звичайний користувач не може змінити її без прав на запис. При спробі редагування відкриття файлу завершується з помилкою. Щодо видалення — воно можливе, оскільки директорія /home/user/ належить самому користувачу і має права на зміну вмісту. Видалення виконується успішно, навіть якщо сам файл створений root'ом.

**Реалізація:**  
[`ex3.c`](ex3.c)

![Результат виконання завдання 3](images/ex3.png)

---

## Завдання 4

**Опис:**  
Напишіть програму, яка по черзі виконує команди `whoami` та `id`, щоб перевірити стан облікового запису користувача, від імені якого вона запущена.  
Є ймовірність, що команда `id` виведе список різних груп, до яких ви належите. Програма повинна це продемонструвати.

Програма послідовно виконує системні команди whoami та id за допомогою функції popen(), щоб визначити ім’я користувача, від імені якого вона запущена, та вивести його ідентифікатори (UID, GID) і список груп, до яких він належить, що дозволяє перевірити рівень доступу користувача в системі.
**Реалізація:**  
[`ex4.c`](ex4.c)

![Результат виконання завдання 4](images/ex4_1.png)

![Результат виконання завдання 4](images/ex4_2.png)
---

## Завдання 5

**Опис:**  
Напишіть програму, яка створює тимчасовий файл від імені звичайного користувача. Потім від імені суперкористувача використовує команди `chown` і `chmod`, щоб змінити тип володіння та права доступу.  
Програма повинна визначити, в яких випадках вона може виконувати читання та запис файлу, використовуючи свій обліковий запис.

**Реалізація:**  
[`ex5.c`](ex5.c)

![Результат виконання завдання 5](images/ex5.png)

---

## Завдання 6

**Опис:**  
Напишіть програму, яка виконує команду `ls -l`, щоб переглянути власника і права доступу до файлів у своєму домашньому каталозі, в `/usr/bin` та в `/etc`.  
Продемонструйте, як ваша програма намагається обійти різні власники та права доступу користувачів, а також здійснює спроби читання, запису та виконання цих файлів.

**Реалізація:**  
[`ex6.c`](ex6.c)

![Результат виконання завдання 6](images/ex6.png)

---

## Варіативне завдання 19

**Опис:**  
Чи можна виконати команду як root без використання sudo або su? Шукайте нестандартні підходи.

**Реалізація:**  
[`ex1c`](ex1c)

![Результат виконання завдання 19](images/ex1png)

---